service cloud.firestore {
  match /databases/{database}/documents {
    // match /{document=**} {
      // allow read, write;
    // }
    // Function in rules
    function signedInOrPublic() {
      return request.auth.uid != null || resource.data.visibility == 'public';
    }

    match /users/{userId} {
      // allow read: if requesta.auth.uid == $userId;
      // allow write: if requesta.auth.uid == $userId;
      allow read, write: if true;
    }
    match /categories/{id} {
      allow read: if true;
      allow write: if false;
    }
    match /products/{productId} {
      allow read: if true;
      allow write: if true;
    }

  }
}
